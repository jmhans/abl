<h2>Messages</h2>
<div *ngIf="messageService.messages.length">


  <button class="clear"
          (click)="messageService.clear()">clear</button>
  <div *ngFor='let message of messageService.messages'> {{message}} </div>

</div>
<div *ngIf="auth.user$ | async as user">{{user | json}}</div>
<div *ngIf="userContext.teams$ | async as teams">{{teams | json}}</div>
<button
(click)="messageService.add(user.name, 'some message')">add</button>
<div *ngIf='messageService.allPosts$ | async as posts'>
  <mat-card *ngFor='let message of posts' class="example-card">
    <mat-card-header>
      <mat-card-title>{{message.title}}</mat-card-title>
      <mat-card-subtitle>{{message.author}} {{message.timestamp}}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>{{message.content}}</p>
      <mat-card *ngFor='let reply of message.replies' class='example-card'>
        <mat-card-subtitle> {{reply.timestamp}}</mat-card-subtitle>
        <mat-card-content>{{reply.content}}</mat-card-content>

      </mat-card>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button>LIKE</button>
      <button mat-button>SHARE</button>
      <button mat-button (click)='messageService.reply(message._id, "Some snarky reply")'>REPLY</button>
    </mat-card-actions>
  </mat-card>


</div>
