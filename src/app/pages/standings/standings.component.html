<!-- src/app/pages/games/games.component.html -->
<h1 class="text-center">{{ pageTitle }}</h1>

      
        <div class="example-table-container" >

          <table mat-table [dataSource]="standingsData$ | async" class="example-table"
                 matSort matSortActive="wpct" matSortDisableClear matSortDirection="desc"
                 (matSortChange)="sortChange($event)" >

            <ng-container matColumnDef="team" >
              <th mat-header-cell *matHeaderCellDef  mat-sort-header>Team</th>
              <td mat-cell *matCellDef="let row">            
                <a [routerLink]="['/team', row.tm._id]"><strong>{{row.tm.nickname }}</strong> </a>
              </td>
            </ng-container>
            
            <ng-container matColumnDef="g">
              <th mat-header-cell *matHeaderCellDef  mat-sort-header>G</th>
              <td mat-cell *matCellDef="let row">{{row.g}}</td>
            </ng-container>

            
            <ng-container matColumnDef="w">
              <th mat-header-cell *matHeaderCellDef  mat-sort-header>W</th>
              <td mat-cell *matCellDef="let row">{{row.w}}</td>
            </ng-container>
            
            <ng-container matColumnDef="l">
              <th mat-header-cell *matHeaderCellDef  mat-sort-header>L</th>
              <td mat-cell *matCellDef="let row">{{row.l}}</td>
            </ng-container>
            
             <ng-container matColumnDef="wpct">
              <th mat-header-cell *matHeaderCellDef  mat-sort-header>Win%</th>
              <td mat-cell *matCellDef="let row">{{row.w / row.g | number: '1.3-3'}}</td>
            </ng-container>
            
            <ng-container matColumnDef="gb">
              <th mat-header-cell *matHeaderCellDef  mat-sort-header>GB</th>
              <td mat-cell *matCellDef="let row">{{ row.gb != 0 ? (row.gb | number: '1.1-1') : '-'}}</td>
            </ng-container>
            
            <ng-container matColumnDef="abl">
              <th mat-header-cell *matHeaderCellDef  mat-sort-header>Avg Runs</th>
              <td mat-cell *matCellDef="let row">{{row.abl_runs | number: '1.2-2'}}</td>
            </ng-container>
            
             <ng-container matColumnDef="ab">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>AB</th>
              <td mat-cell *matCellDef="let row">{{row.ab }}</td>
            </ng-container>
             <ng-container matColumnDef="h">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>H</th>
              <td mat-cell *matCellDef="let row">{{row.h }}</td>
            </ng-container>
            <ng-container matColumnDef="2b">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>2B</th>
              <td mat-cell *matCellDef="let row">{{row['2b'] }}</td>
            </ng-container>
            
            <ng-container matColumnDef="3b">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>3B</th>
              <td mat-cell *matCellDef="let row">{{row['3b'] }}</td>
            </ng-container>
                        <ng-container matColumnDef="hr">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>HR</th>
              <td mat-cell *matCellDef="let row">{{row['hr'] }}</td>
            </ng-container>
            <ng-container matColumnDef="bb">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>BB + HBP</th>
              <td mat-cell *matCellDef="let row">{{row.bb + row.hbp }}</td>
            </ng-container>
            <ng-container matColumnDef="sac" >
              <th mat-header-cell *matHeaderCellDef mat-sort-header>SAC + SF</th>
              <td mat-cell *matCellDef="let row">{{row.sac+row.sf }}</td>
            </ng-container>
            <ng-container matColumnDef="sb">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>SB</th>
              <td mat-cell *matCellDef="let row">{{row.sb }}</td>
            </ng-container>
            <ng-container matColumnDef="cs">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>CS</th>
              <td mat-cell *matCellDef="let row">{{row.cs }}</td>
            </ng-container>
            <ng-container matColumnDef="sb%">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>SB%</th>
              <td mat-cell *matCellDef="let row">{{row.sb / (row.cs + row.sb) | percent:'0.2-2' }}</td>
            </ng-container>
            
            
            <ng-container matColumnDef="e">
              <th mat-header-cell *matHeaderCellDef mat-sort-header >ERR</th>
              <td mat-cell *matCellDef="let row">{{row.e }}</td>
            </ng-container>
            
            <ng-container matColumnDef="bat_avg">
              <th mat-header-cell *matHeaderCellDef mat-sort-header >Bat Avg</th>
              <td mat-cell *matCellDef="let row">{{row.h / row.ab | number:'1.3-3' }}</td>
            </ng-container>
            
            <ng-container matColumnDef="slg_pct">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>SLG</th>
              <td mat-cell *matCellDef="let row">{{(row.h + row['2b'] + 2*row['3b'] + 3*row.hr) / row.ab | number:'1.3-3' }}</td>
            </ng-container>
            
            
            <ng-container matColumnDef="era">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>ERA</th>
              <td mat-cell *matCellDef="let row">{{row.era | number:'1.2-2' }}</td>
            </ng-container>
            <ng-container matColumnDef="hr_allowed">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>HR Allowed</th>
              <td mat-cell *matCellDef="let row">{{row.hr_allowed }}</td>
            </ng-container>
            <ng-container matColumnDef="l10">
              <th mat-header-cell *matHeaderCellDef>L10</th>
              <td mat-cell *matCellDef="let row">{{row.l10.w +'-' + row.l10.l }}</td>
            </ng-container>
            <ng-container matColumnDef="streak">
              <th mat-header-cell *matHeaderCellDef>STR</th>
              <td mat-cell *matCellDef="let row">{{row.streak.type + row.streak.count | uppercase}}</td>
            </ng-container>
            

            
<!--             
             <ng-container *ngFor="let colHead of colHeads" [matColumnDef]="colHead.name">
               <th mat-header-cell *matHeaderCellDef>{{colHead.title}}</th>
                 <td mat-cell  *matCellDef="let row" > 
                   <span *ngIf="colHead.pipe; else elseBlock">
                     {{ (colHead.map) ? (colHead.map(row) | colHead.pipe ) : ( row[colHead.prop] | colHead.pipe) }}
                   </span>
                   <ng-template #elseBlock>{{colHead.map ? colHead.map(row) : row[colHead.prop]}}</ng-template>
                  </td>
            </ng-container> -->
            
            
            

            <tr mat-header-row *matHeaderRowDef="colNames"></tr>
            <tr mat-row *matRowDef="let row; columns: colNames"></tr>
          </table>
      </div>

<!--       <mat-paginator [length]="sortedStandings.length" [pageSize]="30" aria-label="Some label"></mat-paginator> -->
      
  <!-- Error loading events -->
  <p *ngIf="error" class="alert alert-danger">
    <strong>Oops!</strong> There was an error retrieving standings data.
  </p>
